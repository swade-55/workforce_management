{"ast":null,"code":"import React from'react';import{Formik,Form,Field,ErrorMessage}from'formik';import*as Yup from'yup';import{useNavigate,Link}from'react-router-dom';import{useDispatch}from'react-redux';import{loginUser}from'../slices/authSlice';import{fetchTools}from'../slices/toolSlice';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LoginForm=()=>{const navigate=useNavigate();const dispatch=useDispatch();const initialValues={username:'',password:''};const validationSchema=Yup.object().shape({username:Yup.string().required('Username is required'),password:Yup.string().required('Password is required')});const onSubmit=(values,_ref)=>{let{setSubmitting,setErrors}=_ref;dispatch(loginUser(values)).unwrap().then(user=>{console.log('Login Success:',user);navigate('/layout');dispatch(fetchTools());}).catch(error=>{console.error('Error:',error);setErrors({submit:error.message||'Login failed. Please check your username and password.'});}).finally(()=>setSubmitting(false));};return/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center h-screen bg-neutral\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card w-full max-w-sm shadow-2xl bg-base-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-center mb-4\",children:\"Sign In\"}),/*#__PURE__*/_jsx(Formik,{initialValues:initialValues,validationSchema:validationSchema,onSubmit:onSubmit,children:_ref2=>{let{isSubmitting,errors}=_ref2;return/*#__PURE__*/_jsxs(Form,{children:[errors.submit&&/*#__PURE__*/_jsx(\"p\",{className:\"text-error mb-4\",children:errors.submit}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(Field,{name:\"username\",type:\"text\",placeholder:\"Username\",className:\"input input-bordered\"}),/*#__PURE__*/_jsx(ErrorMessage,{name:\"username\",component:\"p\",className:\"text-error mt-1\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control mt-4\",children:[/*#__PURE__*/_jsx(Field,{name:\"password\",type:\"password\",placeholder:\"Password\",className:\"input input-bordered\"}),/*#__PURE__*/_jsx(ErrorMessage,{name:\"password\",component:\"p\",className:\"text-error mt-1\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-control mt-6\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:isSubmitting,className:\"btn btn-primary btn-lg p-4 text-4xl\",children:\"Login\"})})]});}}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between mt-4\",children:[/*#__PURE__*/_jsx(Link,{to:\"/forgot-password\",className:\"text-secondary\",children:\"Forgot Password?\"}),/*#__PURE__*/_jsx(Link,{to:\"/signup\",className:\"text-secondary\",children:\"Sign up\"})]})]})})});};export default LoginForm;","map":{"version":3,"names":["React","Formik","Form","Field","ErrorMessage","Yup","useNavigate","Link","useDispatch","loginUser","fetchTools","jsx","_jsx","jsxs","_jsxs","LoginForm","navigate","dispatch","initialValues","username","password","validationSchema","object","shape","string","required","onSubmit","values","_ref","setSubmitting","setErrors","unwrap","then","user","console","log","catch","error","submit","message","finally","className","children","_ref2","isSubmitting","errors","name","type","placeholder","component","disabled","to"],"sources":["/home/samuelrcwade/Development/Code/Projects/inv_management/client/src/components/LoginForm.js"],"sourcesContent":["import React from 'react';\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\nimport * as Yup from 'yup';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { useDispatch } from 'react-redux'\nimport { loginUser } from '../slices/authSlice';\nimport { fetchTools } from '../slices/toolSlice'\n\n\nconst LoginForm = () => {\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n\n  const initialValues = {\n    username: '',\n    password: '',\n  };\n\n  const validationSchema = Yup.object().shape({\n    username: Yup.string().required('Username is required'),\n    password: Yup.string().required('Password is required'),\n  });\n\n  const onSubmit = (values, { setSubmitting, setErrors }) => {\n    dispatch(loginUser(values))\n      .unwrap()\n      .then((user) => {\n        console.log('Login Success:', user);\n        navigate('/layout'); \n        dispatch(fetchTools());\n      })\n      .catch((error) => {\n        console.error('Error:', error);\n        setErrors({ submit: error.message || 'Login failed. Please check your username and password.' });\n      })\n      .finally(() => setSubmitting(false));\n  };\n\n  return (\n    <div className=\"flex justify-center items-center h-screen bg-neutral\">\n      <div className=\"card w-full max-w-sm shadow-2xl bg-base-100\">\n        <div className=\"card-body\">\n          <h1 className=\"text-3xl font-bold text-center mb-4\">Sign In</h1>\n          <Formik initialValues={initialValues} validationSchema={validationSchema} onSubmit={onSubmit}>\n            {({ isSubmitting, errors }) => (\n              <Form>\n                {errors.submit && <p className=\"text-error mb-4\">{errors.submit}</p>}\n\n                <div className=\"form-control\">\n                  <Field name=\"username\" type=\"text\" placeholder=\"Username\" className=\"input input-bordered\" />\n                  <ErrorMessage name=\"username\" component=\"p\" className=\"text-error mt-1\" />\n                </div>\n\n                <div className=\"form-control mt-4\">\n                  <Field name=\"password\" type=\"password\" placeholder=\"Password\" className=\"input input-bordered\" />\n                  <ErrorMessage name=\"password\" component=\"p\" className=\"text-error mt-1\" />\n                </div>\n\n                <div className=\"form-control mt-6\">\n                  <button type=\"submit\" disabled={isSubmitting} className=\"btn btn-primary btn-lg p-4 text-4xl\">\n                    Login\n                  </button>\n                </div>\n              </Form>\n            )}\n          </Formik>\n\n          <div className=\"flex justify-between mt-4\">\n            <Link to=\"/forgot-password\" className=\"text-secondary\">Forgot Password?</Link>\n            <Link to=\"/signup\" className=\"text-secondary\">Sign up</Link>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default LoginForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}